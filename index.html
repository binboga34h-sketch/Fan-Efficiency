<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fan Verimi Hesaplayıcı</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #0f172a; color: white; text-align: center; padding: 20px; }
        h1 { color: #38bdf8; }
        input { padding: 8px; margin: 5px; border-radius: 5px; border: none; width: 200px; }
        button { padding: 10px 20px; background: #22c55e; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #16a34a; }
        .output { background: #1e293b; padding: 10px; border-radius: 10px; margin-top: 15px; }
        .formula { font-size: 0.9em; color: #94a3b8; text-align: left; display: inline-block; }
    </style>
</head>
<body>

<h1>Fan Verimi Hesaplayıcı</h1>
<p>Sıcaklığa göre yoğunluk otomatik: Birimler → ΔP: Pa, Q: m³/h, Pₑ: kW</p>

<input type="number" id="temp" placeholder="Sıcaklık (°C)">
<input type="number" id="dp" placeholder="Basınç Farkı ΔP (Pa)">
<br>
<input type="number" id="flow" placeholder="Hacimsel Debi Q (m³/h)">
<input type="number" id="vel" placeholder="Hız (m/s)">
<input type="number" id="diam" placeholder="Çap (m)">
<br>
<input type="number" id="power" placeholder="Elektriksel Güç Pₑ (kW)">
<br>
<button onclick="calculate()">HESAPLA</button>

<div class="output" id="result"></div>

<div class="formula">
    <p><b>Formüller:</b></p>
    <ul>
        <li>Yoğunluk: ρ = p / (R·T) &nbsp;&nbsp; (p=101325 Pa, R=287.05 J/kg·K, T=°C+273.15)</li>
        <li>Q (m³/s) = Q (m³/h) / 3600</li>
        <li>Pₕ = Q · ΔP (W)</li>
        <li>η = Pₕ / (Pₑ·1000)</li>
        <li>Alan = π·(d/2)²</li>
        <li>Q (m³/h) = Hız·Alan·3600</li>
    </ul>
</div>

<script>
function calculate() {
    let T = parseFloat(document.getElementById("temp").value);
    let dp = parseFloat(document.getElementById("dp").value);
    let Q = parseFloat(document.getElementById("flow").value);
    let vel = parseFloat(document.getElementById("vel").value);
    let diam = parseFloat(document.getElementById("diam").value);
    let Pe = parseFloat(document.getElementById("power").value);

    // Eğer hız ve çap girilmişse Q'yu otomatik hesapla
    if (!isNaN(vel) && !isNaN(diam)) {
        let alan = Math.PI * Math.pow(diam / 2, 2);
        Q = vel * alan * 3600; // m³/h
        document.getElementById("flow").value = Q.toFixed(2);
    }

    // Yoğunluk hesaplama
    let p = 101325;
    let R = 287.05;
    let rho = p / (R * (T + 273.15));

    // Debiyi m³/s çevir
    let Qms = Q / 3600;

    // Kütlesel debi
    let m_dot = rho * Qms;

    // Hidrolik güç (W)
    let Ph = Qms * dp;

    // Verim
    let eta = (Ph / (Pe * 1000)) * 100;

    document.getElementById("result").innerHTML = `
        ρ (Yoğunluk): <b>${rho.toFixed(4)}</b> kg/m³<br>
        Q: <b>${Qms.toFixed(2)}</b> m³/s (girdi: ${Q.toFixed(2)} m³/h)<br>
        ṁ (Kütlesel debi): <b>${m_dot.toFixed(4)}</b> kg/s<br>
        Pₕ (Hidrolik güç): <b>${(Ph / 1000).toFixed(3)}</b> kW<br>
        η (Fan verimi): <b>${eta.toFixed(2)}</b> %
    `;
}
</script>

</body>
</html>
